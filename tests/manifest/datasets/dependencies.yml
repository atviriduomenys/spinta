---
name: dependencies
type: dataset
version: 1
date: "2019-03-08"
resources:

  continents:
    type: csv
    source: http://example.com
    objects:

      continent:
        source: "/continents.csv"
        properties:
          id:
            type: pk
            source: id
          title:
            type: string
            source: continent
          continent_id:
            type: string
            source: id

      country:
        source: "/continents/{continent}/countries.csv"
        dependencies:
          continent: continent/:ds/dependencies/:rs/continents.continent_id
        properties:
          id:
            type: pk
            source: id
          title:
            type: string
            source: country
          continent:
            type: ref
            source: continent
            ref: continent
            dependency: true
          country_id:
            type: string
            source: id

      capital:
        source: "/continents/{continent}/countries/{country}/captials.csv"
        dependencies:
          continent: country/:ds/dependencies/:rs/continents.continent.continent_id
          country: country/:ds/dependencies/:rs/continents.country_id
        properties:
          id:
            type: pk
            source: id
          title:
            type: string
            source: capital
          country:
            type: ref
            source: country
            ref: country
            dependency: true
